- var layerTypes = {'oth': 'other (ignore)', 'fcu': 'front copper', 'fsm': 'front soldermask', 'fss': 'front silkscreen', 'bcu': 'back copper', 'bsm': 'back soldermask', 'bss': 'back silkscreen', 'out': 'board outline'}

doctype html
html(lang="en")

  head
    meta(charset='utf-8')
    meta(name='viewport' content='width=device-width, initial-scale=1')
    title svgerber

    // octicons
    link(href='bower_components/octicons/octicons/octicons.css' rel='stylesheet')
    // css bundle (includes bootstrap)
    link(href='app.css' rel='stylesheet')

    // HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

  body
    #top-nav-spacer.visible-xs
    nav(roll='navigation')#top-nav.navbar.navbar-default.navbar-fixed-top
      .container-fluid
        a.navbar-brand(href='#') svgerber
          small= " (alpha!)"
        ul.nav.navbar-nav.navbar-right
          li#nav-upload.active
            a(href='#upload-input').octicon.octicon-cloud-upload.nav-link
              span.hidden-xs= ' upload'
          li#nav-layers.disabled
            a(href='#upload-list').octicon.octicon-list-unordered.nav-link
              span.hidden-xs= ' layers'
          li#nav-svgs.disabled
            a(href='#individual-layer-output').octicon.octicon-circuit-board.nav-link
              span.hidden-xs= ' svgs'
          li#nav-source
            a(href='http://github.com/mcous/svgerber' target='_blank').octicon.octicon-mark-github
              span.hidden-xs= ' source'

    #information.container
      h2 what is this
        small= ' a website for ants?'
      p
        | This page is an experiment that's supposed to take your Gerber (PCB fabrication) files and turn them into web-friendly SVG (scalable vector graphic) files that you can download. It's in alpha and pretty buggy and incomplete. It's most thoroughly tested on Gerber files generated by KiCad. If you have a file that doesn't work, please
        a(href='https://github.com/mcous/svgerber/issues') open an issue on GitHub
        |  with the file attached. Enjoy.

    #upload-input.container
      h2 let's do this thing
        small= " but before we do, be aware that some stuff doesn't work:"
      ul
        li incremental coordinates don't work
        li trailing zero suppression is untested
        li drill files are not supported
        li old files with deprecated gerber commands could confuse it
        li the UI is crap
        li anything else that's broken won't work

      #dropzone.row
        span.mega-octicon.octicon-circuit-board.col-sm-8
          = ' drop your gerbers here'
        label(for='file-upload-select').col-sm-3.btn.btn-lg.btn-primary
          = '...or select files'
        input#file-upload-select(type='file' name='file-upload-select' multiple)

    output#upload-list.container.hidden
      ul#filelist.list-unstyled
        li#js-upload-template.js-template.row
          .col-xs-2.col-md-1.filelist-item.mega-octicon.octicon-chevron-right
          .col-xs-10.col-md-4.filelist-item
            p.filename filename
            span= 'layer: '
            select#js-layer-select-template.layer-type-select
              each val, key in layerTypes
                option(value=key)= val
          .col-xs-12.col-md-7.filelist-item
            div.progress
              div#js-plot-progress-template.progress-bar(roll='progressbar' aria-valuenow='60' aria-valuemin='0' aria-valuemax='100' style='width: 60%;')
      .row
        button(type='button' disabled='disabled')#process.btn.btn-primary.btn-lg.col-sm-2.col-sm-offset-5
          = 'svGo!'

    mixin layerContainerContents(longLayer, shortLayer)
      h2.layer-heading= longLayer
      div.layer-drawing(id=shortLayer)
      a(download="#{shortLayer}.svg" href-lang='image/svg+xml' href='#').layer-link
        = 'download svg'

    #individual-layer-output.container.hidden
      #copper-layers-row.row
        #layer-front-copper.layer-container.col-md-6
          +layerContainerContents('front copper', 'fcu')
        #layer-back-copper.layer-container.col-md-6
          +layerContainerContents('back copper', 'bcu')
      #soldermask-layers-row.row
        #layer-front-soldermask.layer-container.col-md-6
          +layerContainerContents('front soldermask', 'fsm')
        #layer-back-soldermask.layer-container.col-md-6
          +layerContainerContents('back soldermask', 'bsm')
      #silkscreen-layers-row.row
        #layer-front-silkscreen.layer-container.col-md-6
          +layerContainerContents('front silkscreen', 'fss')
        #layer-back-silkscreen.layer-container.col-md-6
          +layerContainerContents('back silkscreen', 'bss')
      #drawing-layers-row.row
        #layer-board-outline.layer-container.col-md-6
          +layerContainerContents('board outline', 'out')

    .container#full-board-output

    // app bundle (includes jquery and bootstrap)
    //include ../jade-includes/scripts
    script(src='app.js')

  footer.container
    .navbar
      a(href='http://getbootstrap.com/' target='_blank').col-sm-2
        = 'built with bootstrap'
      a(href='http://octicons.github.com/' target='_blank').col-sm-2
        = "uses github's octicons"
      a(href='http://www.svgjs.com/' target='_blank').col-sm-2
        = "uses svg.js"
      a(href='http://github.com/mcous/svgerber/blob/master/LICENSE.md' target='_blank').col-sm-2.col-sm-offset-4
        = 'copyright 2014 by michael cousins'
